webpackJsonp([2],{M4Yh:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",[a("h2",[s._v("实现一个promise")]),s._v(" "),a("p",[a("b",{staticClass:"update-time"},[s._v(s._s(s._f("formatTime")(1522909332495)))]),s._v(" "),a("b",{staticClass:"type"},[s._v("js")]),s._v(" "),a("b",{staticClass:"kw"},[s._v("promise")]),s._v(" "),a("b",{staticClass:"kw"},[s._v("promise实现")])]),s._v(" "),s._m(0),s._v(" "),a("h3",[s._v("promise基础")]),s._v(" "),s._m(1),s._v(" "),a("h3",[s._v("思考几个问题")]),s._v(" "),s._m(2),s._v(" "),a("p",[s._v("用以下demo来简单解答这几个问题")]),s._v(" "),s._m(3),s._v(" "),a("h3",[s._v("promise构造函数实现")])])},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("blockquote",[t("p",[t("code",{pre:!0},[this._v("Promise")]),this._v("大概是前端开发者非常常用的函数之一，除了使用它，是否考虑过自己实现一个简单的"),t("code",{pre:!0},[this._v("Promise")]),this._v("构造函数？")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",[t("li",[this._v("new Promise")]),this._v(" "),t("li",[this._v("Promise.resolve Promise.reject")]),this._v(" "),t("li",[this._v("Promise.all Promise.race Promise.try")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("ol",[t("li",[this._v("Promise函数参数的执行是同步还是异步？")]),this._v(" "),t("li",[this._v("Promise.prototype.then/catch返回？")]),this._v(" "),t("li",[this._v("resolve后代码报错是否会被catch？")]),this._v(" "),t("li",[this._v("Promise未执行的then／catch行为？")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{pre:!0},[a("code",{attrs:{"v-pre":"",class:"language-JavaScript"}},[a("span",{attrs:{class:"hljs-comment"}},[s._v("// Promise函数参数的执行是同步还是异步？")]),s._v("\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// 这将决定我们如何设计异步")]),s._v("\n"),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n"),a("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n  "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{attrs:{class:"hljs-number"}},[s._v("2")]),s._v(")\n  r()\n}).then("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{attrs:{class:"hljs-number"}},[s._v("3")]),s._v("))\n"),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{attrs:{class:"hljs-number"}},[s._v("4")]),s._v(")\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// 1 2 4 3")]),s._v("\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// Promise函数参数是同步的")]),s._v("\n\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// Promise.prototype.then/catch返回？")]),s._v("\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// 这将决定我们如何设计then／catch返回")]),s._v("\n"),a("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n  r()\n}).then("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n  "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n  "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v(".resolve("),a("span",{attrs:{class:"hljs-number"}},[s._v("2")]),s._v(").then("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(r))\n  "),a("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{attrs:{class:"hljs-number"}},[s._v("3")]),s._v("\n}).then("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n  "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v(".resolve("),a("span",{attrs:{class:"hljs-number"}},[s._v("4")]),s._v(").then("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(r))\n  "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(r)\n  "),a("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n    r()\n  })\n}).then("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{attrs:{class:"hljs-number"}},[s._v("5")]),s._v("))\n"),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{attrs:{class:"hljs-number"}},[s._v("6")]),s._v(")\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// 6 1 2 3 4 5")]),s._v("\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// Promise.prototype.then/catch返回同样是异步函数（新的Promise）")]),s._v("\n\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// resolve后代码报错是否会被catch？")]),s._v("\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// 这将决定我们如何设计try catch")]),s._v("\n"),a("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n  r()\n  "),a("span",{attrs:{class:"hljs-keyword"}},[s._v("throw")]),s._v(" "),a("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("Error")]),s._v("("),a("span",{attrs:{class:"hljs-string"}},[s._v("'there has a error'")]),s._v(")\n}).then("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n  "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{attrs:{class:"hljs-number"}},[s._v("1")]),s._v(")\n}).catch("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("e")]),s._v(" =>")]),s._v(" {\n  "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log("),a("span",{attrs:{class:"hljs-number"}},[s._v("2")]),s._v(", e)\n})\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// 1")]),s._v("\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// resolve后的错误并不会被catch")]),s._v("\n\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// Promise未执行的then／catch行为？")]),s._v("\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// 这将决定我们如何设计then catch默认处理")]),s._v("\n"),a("span",{attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("Promise")]),s._v("("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n  r()\n}).then("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n  "),a("span",{attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),a("span",{attrs:{class:"hljs-number"}},[s._v("1")]),s._v("\n}).then()\n.then("),a("span",{attrs:{class:"hljs-function"}},[a("span",{attrs:{class:"hljs-params"}},[s._v("r")]),s._v(" =>")]),s._v(" {\n  "),a("span",{attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(r)\n})\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// 1")]),s._v("\n"),a("span",{attrs:{class:"hljs-comment"}},[s._v("// 当then／catch未处理会一直传递直到被处理（值穿透问题）")]),s._v("\n")])])}]},l=a("VU/8")(null,n,!1,null,null,null);t.default=l.exports},X4JF:function(s,t,a){s.exports=a("M4Yh")}});
//# sourceMappingURL=2.e59389d6c97567ad29a7.js.map